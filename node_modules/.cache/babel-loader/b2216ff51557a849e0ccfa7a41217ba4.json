{"ast":null,"code":"import { COMPLETE_ONBOARDING, STORE_POSTS, LOGIN_SUCCESS, INVALID_LOGIN, LOGIN_NETWORK_ERROR, LOGOUT, NEW_MESSAGE, CONNECTED, STORE_USERS, ADD_REPLY } from \"./actionConstants\";\nimport firebase from \"../data/fbConfig\";\nimport store from \"./store\";\nimport { joinChat, sendMessage } from \"../client\";\nconst database = firebase.firestore();\nexport const loginSuccess = user => ({\n  type: LOGIN_SUCCESS,\n  payload: {\n    user: user\n  }\n});\nexport const loginFail = () => ({\n  type: INVALID_LOGIN\n});\nexport const loginNetworkError = () => ({\n  type: LOGIN_NETWORK_ERROR\n});\nexport const logout = () => ({\n  type: LOGOUT\n});\nexport const userCompletedOnboarding = userId => {\n  return true; // A real operation would have a return...\n};\nexport const completeOnboarding = () => {\n  // Gets the current user from the store. Note the store import above.\n  const userId = store.getState().user.id;\n  userCompletedOnboarding(userId);\n  return {\n    type: COMPLETE_ONBOARDING\n  };\n};\nexport const storePosts = posts => ({\n  type: STORE_POSTS,\n  payload: {\n    posts: posts\n  }\n});\nexport const getPosts = () => {\n  return dispatch => {\n    database.collection(\"posts\").get().then(querySnapshot => {\n      if (querySnapshot.size > 0) {\n        const posts = {};\n        querySnapshot.forEach(doc => {\n          posts[doc.id] = {\n            caption: doc.data().caption,\n            datePosted: doc.data().datePosted,\n            pictureUrl: doc.data().pictureUrl,\n            reacts: doc.data().reacts,\n            replies: doc.data().replies,\n            tags: doc.data().tags,\n            userId: doc.data().userId,\n            username: doc.data().username\n          };\n        });\n        dispatch(storePosts(posts));\n      } else {\n        console.log(\"No posts available\");\n      }\n    }).catch(error => {\n      console.log(\"Error\");\n    });\n  };\n};\nexport const storeUsers = users => ({\n  type: STORE_USERS,\n  payload: {\n    users: users\n  }\n});\n\nconst updateReply = (postId, reply) => ({\n  type: ADD_REPLY,\n  payload: {\n    postId: postId,\n    reply: reply\n  }\n});\n\nconst updateReacts = (postId, reacts) => ({\n  type: UPDATE_REACTS,\n  payload: {\n    postId: postId,\n    reacts: reacts\n  }\n});\n\nexport const getUsers = () => {\n  return dispatch => {\n    const database = firebase.firestore();\n    database.collection(\"users\").get().then(querySnapshot => {\n      if (querySnapshot.size > 0) {\n        const userDatabase = {};\n        querySnapshot.forEach(doc => {\n          userDatabase[doc.id] = {\n            username: doc.data().username,\n            password: doc.data().password,\n            isNewUser: doc.data().isNewUser,\n            isPublic: doc.data().isPublic,\n            profilePicture: doc.data().profilePicture,\n            friendsList: doc.data().friendsList\n          };\n        });\n        dispatch(storeUsers(userDatabase));\n      } else {\n        console.log(\"No users available\");\n      }\n    }).catch(error => {\n      console.log(\"Error in loading users\");\n    });\n  };\n};\nexport const addReply = (reply, postId) => {\n  return dispatch => {\n    database.collection(\"posts\").doc(postId).update({\n      replies: firebase.firestore.FieldValue.arrayUnion(reply)\n    }).then(() => {\n      dispatch(updateReply(postId, reply));\n    }).catch(error => {\n      console.log(\"Could not add the reply.\", error);\n    });\n  };\n};\nexport const connectToChat = username => {\n  console.log(\"here\");\n  return dispatch => joinChat(username);\n}; // Replaces the direct call to sendMessage in Form\n\nexport const sendToChat = msg => {\n  return dispatch => sendMessage(msg);\n};\nexport const isConnected = () => ({\n  type: CONNECTED\n});\nexport const newMessage = messages => ({\n  type: NEW_MESSAGE,\n  payload: {\n    messages\n  }\n});","map":{"version":3,"sources":["/Users/shebthebat/Documents/NEU/Sem 5/CS 7580/bobby_lupo_lisa_lam_miranda_tran_shebna_mathew_finalproject/src/redux/actions.js"],"names":["COMPLETE_ONBOARDING","STORE_POSTS","LOGIN_SUCCESS","INVALID_LOGIN","LOGIN_NETWORK_ERROR","LOGOUT","NEW_MESSAGE","CONNECTED","STORE_USERS","ADD_REPLY","firebase","store","joinChat","sendMessage","database","firestore","loginSuccess","user","type","payload","loginFail","loginNetworkError","logout","userCompletedOnboarding","userId","completeOnboarding","getState","id","storePosts","posts","getPosts","dispatch","collection","get","then","querySnapshot","size","forEach","doc","caption","data","datePosted","pictureUrl","reacts","replies","tags","username","console","log","catch","error","storeUsers","users","updateReply","postId","reply","updateReacts","UPDATE_REACTS","getUsers","userDatabase","password","isNewUser","isPublic","profilePicture","friendsList","addReply","update","FieldValue","arrayUnion","connectToChat","sendToChat","msg","isConnected","newMessage","messages"],"mappings":"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","sourcesContent":["import { COMPLETE_ONBOARDING, STORE_POSTS, LOGIN_SUCCESS, INVALID_LOGIN, \n  LOGIN_NETWORK_ERROR, LOGOUT, NEW_MESSAGE, CONNECTED, STORE_USERS, ADD_REPLY } from \"./actionConstants\";\nimport firebase from \"../data/fbConfig\";\nimport store from \"./store\";\nimport { joinChat, sendMessage } from \"../client\";\n\nconst database = firebase.firestore();\n\nexport const loginSuccess = user => ({\n    type: LOGIN_SUCCESS,\n    payload: {\n        user: user\n    }\n});\n\nexport const loginFail = () => ({\n    type: INVALID_LOGIN\n});\n\nexport const loginNetworkError = () => ({\n    type: LOGIN_NETWORK_ERROR\n});\n\nexport const logout = () => ({\n    type: LOGOUT\n});\n\nexport const userCompletedOnboarding = userId => {\n   \n    return true; // A real operation would have a return...\n}\n\nexport const completeOnboarding = () => {\n    // Gets the current user from the store. Note the store import above.\n    const userId = store.getState().user.id;\n    userCompletedOnboarding(userId);\n    return {\n        type: COMPLETE_ONBOARDING\n    }\n}\n\nexport const storePosts = (posts) => ({\n    type: STORE_POSTS,\n    payload: {\n        posts: posts\n    }\n\n})\n\nexport const getPosts = () => {\n    return dispatch => {\n      \n      database.collection(\"posts\")\n        .get()\n        .then((querySnapshot) => {\n          if (querySnapshot.size > 0) {\n            const posts = {};\n            querySnapshot.forEach(doc => {\n              posts[doc.id] = {\n                caption:doc.data().caption,\n                datePosted:doc.data().datePosted,\n                pictureUrl:doc.data().pictureUrl,\n                reacts:doc.data().reacts,\n                replies:doc.data().replies,\n                tags:doc.data().tags,\n                userId:doc.data().userId,\n                username:doc.data().username\n              }\n            })\n            dispatch(storePosts(posts));\n          }\n          else {\n            console.log(\"No posts available\") \n          }\n        })\n        .catch(error => {\n          console.log(\"Error\")\n        });\n    }\n  };\n\nexport const storeUsers = (users) => ({\n  type: STORE_USERS,\n  payload: {\n      users: users\n  }\n})\n\nconst updateReply = (postId, reply) => ({\n  type: ADD_REPLY,\n  payload: {\n      postId: postId,\n      reply: reply\n  }\n})\n\nconst updateReacts = (postId, reacts) => ({\n  type: UPDATE_REACTS,\n  payload: {\n      postId: postId,\n      reacts: reacts\n  }\n})\n\nexport const getUsers = () => {\n  return dispatch => {\n    const database = firebase.firestore();\n    database.collection(\"users\")\n      .get()\n      .then((querySnapshot) => {\n        if (querySnapshot.size > 0) {\n          const userDatabase = {};\n          querySnapshot.forEach(doc => {\n            userDatabase[doc.id] = {\n              username:doc.data().username,\n              password:doc.data().password,\n              isNewUser:doc.data().isNewUser,\n              isPublic:doc.data().isPublic,\n              profilePicture:doc.data().profilePicture,\n              friendsList:doc.data().friendsList\n            }\n          })\n          dispatch(storeUsers(userDatabase));\n        }\n        else {\n          console.log(\"No users available\") \n        }\n      })\n      .catch(error => {\n        console.log(\"Error in loading users\")\n      });\n      \n}};\n\nexport const addReply = (reply, postId) => {\n  return dispatch => {\n    database.collection(\"posts\").doc(postId)\n      .update({\n        replies: firebase.firestore.FieldValue.arrayUnion(reply)\n      })\n      .then(() => {\n          dispatch(updateReply(postId, reply));\n      })\n      .catch(error => {\n        console.log(\"Could not add the reply.\",error);\n      })\n  }\n}\n\nexport const connectToChat = username => {\n    console.log(\"here\");\n    return dispatch => joinChat(username);\n    \n}\n\n// Replaces the direct call to sendMessage in Form\nexport const sendToChat = msg =>  {\n    return dispatch => sendMessage(msg);\n}\n\nexport const isConnected = () => ({type: CONNECTED})\n\nexport const newMessage = messages => ({\n    type: NEW_MESSAGE,\n    payload: {\n        messages\n    }\n})"]},"metadata":{},"sourceType":"module"}